<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LTM Pool Tournament 2026</title>

<style>

body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: url("https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?auto=format&fit=crop&w=1600&q=80") no-repeat center center fixed;
    background-size: cover;
    color: white;
}

.overlay {
    background: rgba(0,0,0,0.75);
    min-height:100vh;
    padding:40px;
}

h1 {
    text-align:center;
    font-size:40px;
    margin-bottom:40px;
    color:#00ff99;
    letter-spacing:2px;
}

h2 {
    margin-top:50px;
    color:#00ffcc;
}

table {
    width:100%;
    border-collapse: collapse;
    margin-top:15px;
    margin-bottom:40px;
    backdrop-filter: blur(10px);
    background: rgba(255,255,255,0.08);
    border-radius:10px;
    overflow:hidden;
}

th {
    background:#006633;
    color:white;
    padding:12px;
}

td {
    padding:10px;
    text-align:center;
    border-bottom:1px solid rgba(255,255,255,0.1);
}

input {
    width:60px;
    padding:5px;
    border-radius:5px;
    border:none;
    text-align:center;
}

.qualified {
    background: rgba(0,255,153,0.25) !important;
    font-weight:bold;
    color:#00ff99;
}

</style>
</head>

<body>
<div class="overlay">

<h1>ðŸŽ± LTM POOL TOURNAMENT 2026</h1>

<div id="groups"></div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyD-3BzT-YnkegIJOKmAd38yxrajr8jct8",
  authDomain: "ltm-pool-tournament.firebaseapp.com",
  databaseURL: "https://ltm-pool-tournament-default-rtdb.firebaseio.com",
  projectId: "ltm-pool-tournament",
  storageBucket: "ltm-pool-tournament.firebasestorage.app",
  messagingSenderId: "1086941609764",
  appId: "1:1086941609764:web:051594093405f3ee83fdb1"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const groups = {
"Group A": ["Pratyush","Vamshi Krishna","Bhalchandra","Bhavik","Protim"],
"Group B": ["Chirag","Karan","Tameem","Arif","Syam"],
"Group C": ["Ganesh","Dinesh","Yash","Rachit","Ankit"],
"Group D": ["Somyadeep","Shrey","Gaurav","Abdul","Vikas"]
};

const container = document.getElementById("groups");

for (let groupName in groups) {

let html = `<h2>${groupName}</h2>
<table>
<thead>
<tr>
<th>Player</th>
<th>P</th>
<th>W</th>
<th>L</th>
<th>Points</th>
</tr>
</thead>
<tbody>`;

groups[groupName].forEach(player => {
html += `
<tr data-player="${player}" data-group="${groupName}">
<td>${player}</td>
<td class="played">0</td>
<td><input type="number" min="0" max="4" value="0" class="wins"></td>
<td><input type="number" min="0" max="4" value="0" class="loss"></td>
<td class="points">0</td>
</tr>`;
});

html += `</tbody></table>`;
container.innerHTML += html;
}

function updateTable(table) {

let rows = Array.from(table.querySelectorAll("tbody tr"));

rows.forEach(row => {
let w = parseInt(row.querySelector(".wins").value) || 0;
let l = parseInt(row.querySelector(".loss").value) || 0;

row.querySelector(".played").innerText = w + l;
row.querySelector(".points").innerText = w * 2;
row.classList.remove("qualified");
});

rows.sort((a,b) =>
parseInt(b.querySelector(".points").innerText) -
parseInt(a.querySelector(".points").innerText)
);

rows.forEach(row => table.querySelector("tbody").appendChild(row));
rows.slice(0,2).forEach(row => row.classList.add("qualified"));
}

document.addEventListener("input", function(e) {
if (e.target.classList.contains("wins") || e.target.classList.contains("loss")) {

let row = e.target.closest("tr");
let group = row.dataset.group;
let player = row.dataset.player;

let wins = parseInt(row.querySelector(".wins").value) || 0;
let loss = parseInt(row.querySelector(".loss").value) || 0;

set(ref(db, group + "/" + player), {
wins: wins,
loss: loss
});

updateTable(e.target.closest("table"));
}
});

for (let group in groups) {
for (let player of groups[group]) {

onValue(ref(db, group + "/" + player), snapshot => {

if (snapshot.exists()) {

let data = snapshot.val();

let row = document.querySelector(
`tr[data-group="${group}"][data-player="${player}"]`
);

row.querySelector(".wins").value = data.wins || 0;
row.querySelector(".loss").value = data.loss || 0;

updateTable(row.closest("table"));
}
});
}
}

</script>

</body>
</html>
